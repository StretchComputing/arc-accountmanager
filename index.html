<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta name="robots" content="noindex, follow">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="apple-mobile-web-app-capable" content="yes">

      <title>Account Manager App</title>

      <link rel="apple-touch-icon-precomposed" href="images/touch-icon-iphone.png" />
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/touch-icon-iphone.png" />
      <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/touch-icon-iphone.png" />

      <link rel="stylesheet" href="css/themes/font-awesome/css/font-awesome.min.css">
      <link rel="stylesheet"  href="css/themes/default/jquery.mobile-1.3.1.css">
      <link rel="stylesheet"  href="css/themes/lightblue/apruvr_lblue.css">
      <link href='http://fonts.googleapis.com/css?family=Ubuntu|Open+Sans:400,700' rel='stylesheet' type='text/css'>
      <link rel="stylesheet" href="css/styles.css">

      <script src="js/lib/jquery.js"></script>
      <script src="js/lib/jquery.mobile.router.min.js"></script>
      <script src="js/lib/jquery.mobile-1.3.1.min.js"></script>
      <script src="js/lib/cookie.js"></script>

      <script src="js/lib/underscore-min.js"></script>
      <script src="js/lib/backbone-min.js"></script>
      <script src="js/helpers/util.js"></script>
      <script src="js/helpers/rskybox.js"></script>
      <script src="js/helpers/store.js"></script>
      <script src="js/helpers/session.js"></script>
      <script src="js/controllers/main.js"></script>
      <script src="js/models/base.js"></script>
      <script src="js/models/login.js"></script>
      <script src="js/models/user.js"></script>
      <script src="js/views/base.js"></script>
      <script src="js/views/login.js"></script>

	  <script src="js/lib/merchantobject.js"></script>

      <script>
          $( document ).on( "pageshow", function(){
              $( "p.message" ).hide().delay( 1500 ).show( "fast" );
          });
      </script>
  </head>
  <body>
    <div data-role="page" id="login">
      <div data-role="header">
        <h1>Account Manager</h1>
      </div>
      <div data-role="content">
        <form id="loginForm"></form>
      </div>
    </div>
    <script type="text/template" id="loginTemplate">
      <ul data-role="listview">
        <li data-role="fieldcontain">
          <label for="login" class="ui-hidden-accessible">Username:</label>
          <input type="text" name="login" placeholder="Arc Username" value="<%= aduser %>" autocorrect="off" autocapitalize="off" data-mini="true">
        </li>
        <li data-role="fieldcontain">
          <label for="password" class="ui-hidden-accessible">Password:</label>
          <input id="password" name="password" type="password" placeholder="Password" value="<%= password %>" autocorrect="off" autocapitalize="off" data-mini="true">
        </li>
        <li data-role="fieldcontain">
          <input type="submit" value="Login" data-mini="true">
        </li>
      </ul>
    </script>
    
    <div data-role="page" id="editMerchant">
    	<div data-role="header" data-position="fixed" data-tap-toggle="false" >
    	    <a href="#home" data-role="button" data-icon="arrow-l">Back</a>
    		<h1 id="editMerchantHead">Editing </h1>
    		<button data-icon="check" id="editMerchantSave">Save</button>
    		
    	</div>
    	
    	<div data-role="content" id="editMerchantContent">

    	</div>
    </div>
    
    <script type="text/template" id="editMerchantForm">
		<ul data-role="listview" id="<%=pageIdPrefix%>List">

		<div class="ui-grid-a">
		
		<div class="ui-block-a">
			<li><label for="<%=pageIdPrefix%>Name"> Name </label>
			<input type="text" name="Name" id="<%=pageIdPrefix%>Name" value="<%= Name %>" ></li>

			<li><label for="<%=pageIdPrefix%>Street"> Street </label>
			<input type="text" name="Street" id="<%=pageIdPrefix%>Street" value="<%= Street %>" ></li>

			<li><label for="<%=pageIdPrefix%>City"> City </label>
			<input type="text" name="City" id="<%=pageIdPrefix%>City" value="<%= City %>" ></li>

			<li><label for="<%=pageIdPrefix%>ZipCode"> Zip Code </label>
			<input type="text" name="ZipCode" id="<%=pageIdPrefix%>ZipCode" value="<%= ZipCode %>" ></li>

			<li><label for="<%=pageIdPrefix%>TypeOfService"> Type Of Service </label>
			<input type="text" name="TypeOfService" id="<%=pageIdPrefix%>TypeOfService" value="<%= TypeOfService %>" ></li>

			<li><label for="<%=pageIdPrefix%>POS"> POS Type </label>
			<select id="<%=pageIdPrefix%>POS" name="POS">
				<option <%if(POS == 'POS_MICROS'){ %>selected<% } %> >POS_MICROS</option>
				<option <%if(POS == 'POS_ISIS'){ %>selected<% } %> >POS_ISIS</option>
				<option <%if(POS == 'POS_ALOHA'){ %>selected<% } %> >POS_ALOHA</option>
			</select></li>

			<li><label for="<%=pageIdPrefix%>NumTables"> Number of Tables </label>
			<input type="text" name="NumTables" id="<%=pageIdPrefix%>NumTables" value="<%= NumTables %>" ></li>

			<li><label for="<%=pageIdPrefix%>FacebookHandler"> Facebook Handle </label>
			<input type="text" name="FacebookHandler" id="<%=pageIdPrefix%>FacebookHandler" value="<%= FacebookHandler %>" ></li>

			<li><label for="<%=pageIdPrefix%>CurrentCreditRate"> Current Credit Rate </label>
			<input type="text" name="CurrentCreditRate" id="<%=pageIdPrefix%>CurrentCreditRate" value="<%= CurrentCreditRate %>" ></li>

			<li><label for="<%=pageIdPrefix%>AcceptTerms">Accepted Terms?</label>
			<input type="checkbox" name="AcceptTerms" id="<%=pageIdPrefix%>AcceptTerms" <%if(AcceptTerms) { %>checked<% } %> ></li>
		</div>

		<div class="ui-block-b">

			<li><label for="<%=pageIdPrefix%>Status"> Status </label>
			<select id="<%=pageIdPrefix%>Status">
				<option <%if(Status === 'Potential'){ %>selected<% } %> >Potential</option>
				<option <%if(Status === 'In Talks'){ %>selected<% } %> >In Talks</option>
				<option <%if(Status === 'Configuration'){ %>selected<% } %> >Configuration</option>
				<option <%if(Status === 'Ready'){ %>selected<% } %> >Ready</option>
				<option <%if(Status === 'Active'){ %>selected<% } %> >Active</option>
			</select></li>

			<li><label for="<%=pageIdPrefix%>EIN"> EIN </label>
			<input type="text" name="EIN" id="<%=pageIdPrefix%>EIN" value="<%= EIN %>" ></li>			

			<li><label for="<%=pageIdPrefix%>State"> State </label>
			<input type="text" name="State" id="<%=pageIdPrefix%>State" value="<%= State %>" ></li>

			<li><label for="<%=pageIdPrefix%>PaymentAccepted"> PaymentAccepted </label>
			<input type="text" name="PaymentAccepted" id="<%=pageIdPrefix%>PaymentAccepted" value="<%= PaymentAccepted %>" ></li>

			<li><label for="<%=pageIdPrefix%>eMail"> eMail </label>
			<input type="text" name="eMail" id="<%=pageIdPrefix%>eMail" value="<%= eMail %>" ></li>

			<li><label for="<%=pageIdPrefix%>Website"> Website </label>
			<input type="text" name="Website" id="<%=pageIdPrefix%>Website" value="<%= Website %>" ></li>

			<li><label for="<%=pageIdPrefix%>NumSeats"> Number of Seats </label>
			<input type="text" name="NumSeats" id="<%=pageIdPrefix%>NumSeats" value="<%= NumSeats %>" ></li>

			<li><label for="<%=pageIdPrefix%>TwitterHandler"> Twitter Handle </label>
			<input type="text" name="TwitterHandler" id="<%=pageIdPrefix%>TwitterHandler" value="<%= TwitterHandler %>" ></li>

			<li><label for="<%=pageIdPrefix%>CurrentCreditFee"> Current Credit Fee </label>
			<input type="text" name="CurrentCreditFee" id="<%=pageIdPrefix%>CurrentCreditFee" value="<%= CurrentCreditFee %>" ></li>

		</div><!-- ui-block-b -->
		</div><!-- ui-grid-a -->

		<li data-role="list-divider">Points of Contact</li>
		<div id="<%=pageIdPrefix%>PocList">

			<% _.each(DecisionMakers, function(Poc) { %>
				<% template = _.template($('#decisionMakerForm').html()); %>
				<% Poc.index = index; %>
				<% Poc.pageIdPrefix = pageIdPrefix %>
				<%=template(Poc)%>
				<% delete Poc.index %>
				<% delete Poc.pageIdPrefix %>
				
			<%  }); %>

		</div>
		<li><button id="pocAddNew" data-icon="plus">Add New Point of Contact</button></li>
		</ul>

	</script>

	<script type="text/template" id="decisionMakerForm">
		<div formType="Poc" id="pocForm<%=index%>">
		<div class="ui-grid-a">

		<div class="ui-block-a">

			<li><label for="<%=pageIdPrefix%>PocFirstName<%=index%>" >First Name</label>
				<input type="text" PocProp="FirstName" index="<%=index%>" id="pageIdPrefix%>PocFirstName<%=index%>" value="<%=FirstName%>" ></li>

			<li><label for="<%=pageIdPrefix%>PocPhone<%=index %>" >Phone Number</label>
				<input type="text" PocProp="Phone" index="<%=index%>" id="<%=pageIdPrefix%>PocPhone<%=index %>" value="<%=Phone%>" ></li>

			<li><label for="<%=pageIdPrefix%>PoceMail<%=index %>" >eMail Address</label>
				<input type="text" PocProp="eMail" index="<%=index%>" id="<%=pageIdPrefix%>PoceMail<%=index %>" value="<%=eMail%>" ></li>

		</div>

		<div class="ui-block-b">
			<li><label for="<%=pageIdPrefix%>PocLastName<%=index %>" >Last Name</label>
			<input type="text" PocProp="LastName" index="<%=index%>" id="<%=pageIdPrefix%>PocLastName<%=index %>" value="<%=LastName%>" ></li>

			<li><label for="<%=pageIdPrefix%>PocPosition<%=index %>" >Position</label>
			<input type="text" PocProp="Position" index="<%=index%>" id="<%=pageIdPrefix%>PocPosition<%=index %>" value="<%=Position%>" ></li>

			<li><button id="<%=pageIdPrefix%>Delete<%=index%>" data-icon="delete">Delete</button></li>
		</div>
		</div>
		<li data-role="list-divider">--------------------------------------------------------</li>
		</div>
		
	</script>

    <div data-role="page" id="home">
    
      <div data-role="header" data-position="fixed" data-tap-toggle="false">
       <a href="#home_leftPanel" data-role="none" class="header-custom-bars">&nbsp;</a>
       <h1>Account Manager</h1>
       <a href="#createNewMerchant" data-icon="plus" data-role="button">Add</a>
       
      </div>

      <div data-role="content" id="homeContent">
      	<ul data-role="listview" data-filter="true" id="merchantListCollapsible"></ul>      
      </div>
      
      <div data-role="popup" id="popupDialog" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
        <div data-role="header" data-theme="a" class="ui-corner-top">
          <h1>Confirm</h1>
        </div>
        <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
          <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>
          <a href="#" class="confirmbtn" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b">Approve</a>
        </div>
      </div>
    </div><!-- /page -->

<script type="script/template" id="collapsibleMercahntList">
		<li>
			<div data-role="collapsible">
				<h3><%= Name %></h3>
				<div class="ui-grid-a" id="merchantList<%=Number%>">

				<div class="ui-block-a"><!-- Left hand side -->
				<ul>
					<li>Status: <%= Status %></li>
					<li>Accepted Terms and Conditions: <%= AcceptTerms %></li>
					<li>Street: <%= Street %></li>
					<li>State: <%= State %></li>
					<li>Point of Sale Device: <%= POS %></li>
					<li>Twitter Handle: <%= TwitterHandler %></li>
					<li>Website : <%= Website %></li>
					<li>Number of Tables: <%= NumTables %></li>
					<li>Type of Service : <%= TypeOfService %></li>
					<li>Current Credit Fee : <%= CurrentCreditFee%></li>
				</ul></div>

				<div class="ui-block-b"><!-- Right hand side -->
				<ul>
					<li>Employer ID Number: <%= EIN %></li>
					<li>City: <%= City %></li>
					<li>ZipCode: <%= ZipCode %></li>
					<li>Payment Accepted: <%= PaymentAccepted %></li>
					<li>eMail Address: <%= eMail %></li>
					<li>Facebook Handle: <%= FacebookHandler %></li>
					<li>Price Level: <%= PriceLevel %></li>
					<li>Number of Seats: <%= NumSeats %></li>
					<li>Current Credit Card Rate: <%=CurrentCreditRate %></li>
				</ul></div>
				</div><!-- End Grid -->
				<% _.each(DecisionMakers, function(person) { %>
					<h3>Point of Contact: <%= person.FirstName %> <%= person.LastName %> </h3>
					<div class="ui-grid-a">
					<div class="ui-block-a">
						<ul>
						<li>Position : <%= person.Position %></li>
						<li>eMail Address : <%= person.eMail %></li>
						</ul>
					</div>
					
					<div class="ui-block-b">
						<ul>
						<li>Phone Number: <%= person.Phone %></li>
						</ul>
					</div>
					</div>
				<% }); %>

			<div class="ui-grid-a">
			<div class="ui-block-a">
				<button id="merchantChoose<%= Number %>" merchantName="<%= Name %>">Select</button>
			</div>
			<div class="ui-block-b">
				<button id="merchantEdit<%= Number %>" merchantName="<%= Name %>">Edit</button>
			</div>
			</div>
			</div>
		</li>
	</script>

<div data-role="page" id="createNewMerchant">
	
	<div data-role="header" data-position="fixed" data-tap-toggle="false">
		<a href="#home" data-icon="arrow-l">Back</a>
		<h1>Create New Merchant</h1>
		<button data-icon="check" id="createNewMerchantSave">Save</button>
	</div>

	<div data-role="content" id="createNewMerchantContent">
	
    </div>	
	

</div>

    <div data-role="page" id="configure">
      <div data-role="header" data-position="fixed" data-tap-toggle="false">
        <h1>Account Manager</h1>
        <a href="#configure_leftPanel" data-role="none" class="header-custom-bars">&nbsp;</a>
      </div>

      <div data-role="content">
        <div>This is the Configure page</div>
      </div>
    </div><!-- /page -->

    <div data-role="page" id="configureTest">
      <div data-role="header" data-position="fixed" data-tap-toggle="false">
        <h1>Account Manager</h1>
        <a href="#configureTest_leftPanel" data-role="none" class="header-custom-bars">&nbsp;</a>
      </div>

      <div data-role="content">
        <div>This is the Configure Test page</div>
      </div>
    </div><!-- /page -->

    <div data-role="page" id="reports">
      <div data-role="header" data-position="fixed" data-tap-toggle="false">
        <h1>Account Manager</h1>
        <a href="#reports_leftPanel" data-role="none" class="header-custom-bars">&nbsp;</a>
      </div>

      <div data-role="content">
        <div>This is the Reports page</div>
      </div>
    </div><!-- /page -->

    <script type="text/template" id="leftPanelTemplate">
      <div data-role="panel" id="page_leftPanel" data-theme="c" data-position-fixed="true">
         <ul data-role="listview" data-theme="b" data-divider-theme="b" style="margin-top:-16px;" class="nav-search">
            <li data-icon="delete" style="background-color:#111;">
              <a href="#" data-rel="close" class="userName">[USER NAME]</a>
            </li>
          </ul>
          <ul data-role="listview" data-theme="a" data-divider-theme="a" style="margin-top:15px;">
            <li data-icon="home">
              <a class="home">Home</a>
            </li>
            <li>
              <a class="configure">Configure</a>
            </li>
            <li>
              <a class="configureTest">Configure Test</a>
            </li>
          </ul>
          <ul data-role="listview" data-theme="b" data-divider-theme="b" style="margin-top:15px;">
            <div data-role="collapsible" data-theme="b" data-content-theme="b" data-collapsed-icon="gear" data-expanded-icon="gear" data-iconpos="right" data-inset="true" style="margin-bottom:0px;">
              <h2>Reports</h2>
              <ul data-role="listview">
                <li><a href="#">Cohort Report</a></li>
                <li><a href="#">Sales Report</a></li>
              </ul>
            </div><!-- /collapsible -->
            <li data-icon="alert">
              <a href="#" class="logOut">Log Out</a>
            </li>
          </ul>
      </div><!-- /panel -->
    </script>


</body>
</html>
